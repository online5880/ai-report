name: Notify Slack on Push
on: push

jobs:
  slack_notification:
    runs-on: ubuntu-latest
    steps:
    - name: Check out repository
      uses: actions/checkout@v2
      with:
        fetch-depth: 0  # ì „ì²´ Git íˆìŠ¤í† ë¦¬ë¥¼ ê°€ì ¸ì˜¤ë„ë¡ ì„¤ì •

    - name: Send Slack notification
      run: |
        COMMIT_MESSAGE=$(git log -1 --pretty=%B)
        AUTHOR_NAME=$(git log -1 --pretty=format:'%an')
        FILES_CHANGED=$(git diff-tree --no-commit-id --name-only -r HEAD)
        BRANCH_NAME=$(echo "${{ github.ref }}" | sed 's|refs/heads/||')

        # Slack ë©”ì‹œì§€ í¬ë§·
        curl -X POST -H 'Content-type: application/json' --data "{
          \"text\": \":robot_face: *í‘¸ì‹œë§¨* ğŸ¤– ì´ ìƒˆë¡œìš´ ë³€ê²½ì‚¬í•­ì„ ë°°ë‹¬í–ˆìŠµë‹ˆë‹¤!\\n\\nğŸ“¦ *íŒŒì¼ ë³€ê²½ ë‚´ì—­:*\\n\`\`\`$FILES_CHANGED\`\`\`\\n\\nâœï¸ *ì»¤ë°‹ ë©”ì‹œì§€:*\\n\`\`\`$COMMIT_MESSAGE\`\`\`\\n\\nğŸ‘¤ *ì‘ì„±ì:* $AUTHOR_NAME\\n\\nğŸ¤– _ì´ ë©”ì‹œì§€ëŠ” AI ë¡œë´‡ì´ ì—´ì‹¬íˆ ë°°ë‹¬í–ˆìŠµë‹ˆë‹¤! ë‹¤ìŒ í‘¸ì‹œë„ ë§¡ê²¨ì£¼ì„¸ìš”!_ ğŸ¦¾\"
        }" ${{ secrets.SLACK_WEBHOOK_URL }}
